/*!
 * license inazumatv.com
 * author (at)taikiken / http://inazumatv.com
 * date 2015/04/20 - 16:51
 *
 * Copyright (c) 2011-2015 inazumatv.com, inc.
 *
 * Distributed under the terms of the MIT license.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of the Software.
 *
 * thanks
 * gl-matrix
 * https://github.com/toji/gl-matrix
 *
 * html5rocks.com
 * http://www.html5rocks.com/en/tutorials/canvas/imagefilters/
 *
 * Blur by Mario Klingemann
 * http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html
 *
 * version 0.0.1
 * build 2015-09-09 19:51:53
 * git https://github.com/taikiken/igata.js
 *
 */
var Igata=window.Igata||{};!function(t,r){"use strict";function a(t){return 65280&t}function e(t){return 255&t}function o(t){return g[(65280&t)>>8]}var f=r;f.Float32Array=t.Float32Array,f._random=Math.random,f._abs=Math.abs,f._min=Math.min,f._max=Math.max,f._sqrt=Math.sqrt,f._cos=Math.cos,f._sin=Math.sin,f._round=Math.round,f._floor=Math.floor,f._exp=Math.exp,f._PI=Math.PI,f.extend=function(t,r){r.prototype=Object.create(t.prototype),r.prototype.constructor=r};var n=1.192092896e-7,i=1e-37,u=256,s=512,c=1024,h=2048,d=4096,l=1,p=2,v=3,y=4,g=new Int32Array([-1,1,4,-1,4,-1,-1,-1,8,-1,-1,-1,-1,-1,-1,-1,8]),w=0,_=1,m=2,x=3,b=1,B=1,M=2;f.U8_t=u,f.S32_t=s,f.F32_t=c,f.S64_t=h,f.F64_t=d,f.C1_t=l,f.C2_t=p,f.C3_t=v,f.C4_t=y,f.U8C1_t=u|l,f.U8C3_t=u|v,f.U8C4_t=u|y,f.F32C1_t=c|l,f.F32C2_t=c|p,f.S32C1_t=s|l,f.S32C2_t=s|p,f.EPSILON=n,f.FLT_MIN=i,f.COLOR_RGBA2GRAY=w,f.COLOR_RGB2GRAY=_,f.COLOR_BGRA2GRAY=m,f.COLOR_BGR2GRAY=x,f.BOX_BLUR_NOSCALE=b,f.SVD_U_T=B,f.SVD_V_T=M,f.get_data_type=a,f.get_channel=e,f.get_data_type_size=o}(window,Igata),function(t){"use strict";var r=t.Igata;r.Bitmap=function(){function t(t,r){this.identity=null,Object.defineProperties(this,{context:{get:function(){return t}},img:{get:function(){return r}}})}var r=t.prototype;return r.constructor=t,r.get=function(t,r,a,e){var o=this.context,f=this.img;return f&&(a=a||f.width,e=e||f.height),t=t||0,r=r||0,o.getImageData(t,r,a,e)},r.save=function(t){this.identity=new Uint8ClampedArray(t)},t}()}(window),function(t){"use strict";var r=t.Igata;r.Filter=function(){function t(t){Object.defineProperties(this,{bitmap:{get:function(){return t},set:function(r){t=r}}})}var r=t.prototype;return r.constructor=t,r.filter=function(){},r.imageData=function(t){var r=t.get();return t.identity||t.save(r.data),r},r.restore=function(){var t,r=this.bitmap,a=r.get(),e=r.identity;e&&(a.data.set(e),t=r.context,t.putImageData(a,0,0))},t}()}(window),function(t){"use strict";var r=t.Igata;r.Invert=function(){function t(t){a.call(this,t)}var a=r.Filter;r.extend(a,t);var e=t.prototype;return e.constructor=t,e.filter=function(){var t,r,a,e,o=this.bitmap,f=o.context,n=this.imageData(o);for(t=n.data,r=0,a=t.length;a>r;r=r+4|0)e=r,t[e]=255-t[e],e=r+1,t[e]=255-t[e],e=r+2,t[e]=255-t[e];f.putImageData(n,0,0)},t}()}(window),function(t){"use strict";var r=t.Igata;r.Brightness=function(){function t(t){a.call(this,t)}var a=r.Filter;r.extend(a,t);var e=t.prototype;return e.constructor=t,e.filter=function(t){var r,a,e,o,f,n=this.bitmap,i=n.context,u=this.imageData(n);for(r=new Uint8ClampedArray(n.identity),a=2.55*t,o=0,f=r.length;f>o;o=o+4|0)e=o,r[e]=a+r[e],e=o+1,r[e]=a+r[e],e=o+2,r[e]=a+r[e];u.data.set(r),i.putImageData(u,0,0)},t}()}(window),function(t){"use strict";var r=t.Igata;r.Grayscale=function(){function t(t){a.call(this,t)}var a=r.Filter;r.extend(a,t);var e=t.prototype;return e.constructor=t,e.filter=function(){var r=this.bitmap,a=r.context,e=this.imageData(r);t.to(e.data),a.putImageData(e,0,0)},t.to=function(t){var r,a,e,o,f,n,i;for(r=0,a=t.length;a>r;r=r+4|0)e=r+1,o=r+2,f=t[r],n=t[e],i=t[o],t[r]=t[e]=t[o]=.2126*f+.7152*n+.0722*i},t}()}(window),function(t){"use strict";var r=t.Igata;r.Sepia=function(){function t(t){a.call(this,t)}var a=r.Filter;r.extend(a,t);var e=t.prototype;return e.constructor=t,e.filter=function(){var t,r,a,e,o,f,n,i,u=this.bitmap,s=u.context,c=this.imageData(u);for(t=c.data,r=0,a=t.length;a>r;r=r+4|0)e=r+1,o=r+2,f=t[r],n=t[e],i=t[o],t[r]=.393*f+.769*n+.189*i,t[e]=.349*f+.686*n+.168*i,t[o]=.272*f+.534*n+.131*i;s.putImageData(c,0,0)},t}()}(window),function(t){"use strict";var r=t.Igata;r.Threshold=function(){function t(t){a.call(this,t)}var a=r.Filter;r.extend(a,t);var e=t.prototype;return e.constructor=t,e.filter=function(t){var r,a,e,o,f,n,i,u,s,c=this.bitmap,h=c.context,d=this.imageData(c);for(t=t||128,r=d.data,a=0,e=r.length;e>a;a=a+4|0)i=a+1,u=a+2,o=r[a],f=r[i],n=r[u],s=.2126*o+.7152*f+.0722*n>=t?255:0,r[a]=r[i]=r[u]=s;h.putImageData(d,0,0)},t}()}(window),function(t){"use strict";var r=t.Igata,a=function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var r=t.prototype;return r.constructor=t,t}();r.Blur=function(){function t(t){e.call(this,t)}var e=r.Filter,o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],f=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];r.extend(e,t);var n=t.prototype;return n.constructor=t,n.filter=function(t,r){var a,e=this.bitmap,o=e.context,f=this.imageData(e);a=new Uint8ClampedArray(e.identity),isNaN(t)&&(t=8),t|=0,0!==t?(r?this._rgba(a,t,f.width,f.height):this._rgb(a,t,f.width,f.height),f.data.set(a),o.putImageData(f,0,0)):this.restore()},n._rgba=function(t,r,e,n){var i,u,s,c,h,d,l,p,v,y,g,w,_,m,x,b,B,M,I,A,C,D,z,O,S,R=r+r+1,k=e-1,F=n-1,L=r+1,U=L*(L+1)/2,G=new a,E=G;for(s=1;R>s;s=s+1|0)E=E.next=new a,s===L&&(S=E);E.next=G;var P=null,q=null;l=d=0;var N=o[r],T=f[r];for(u=0;n>u;u=u+1|0){for(b=B=M=I=p=v=y=g=0,w=L*(A=t[d]),_=L*(C=t[d+1]),m=L*(D=t[d+2]),x=L*(z=t[d+3]),p+=U*A,v+=U*C,y+=U*D,g+=U*z,E=G,s=0;L>s;s=s+1|0)E.r=A,E.g=C,E.b=D,E.a=z,E=E.next;for(s=1;L>s;s=s+1|0)c=d+((s>k?k:s)<<2),p+=(E.r=A=t[c])*(O=L-s),v+=(E.g=C=t[c+1])*O,y+=(E.b=D=t[c+2])*O,g+=(E.a=z=t[c+3])*O,b+=A,B+=C,M+=D,I+=z,E=E.next;for(P=G,q=S,i=0;e>i;i=i+1|0)t[d+3]=z=g*N>>T,0!==z?(z=255/z,t[d]=(p*N>>T)*z,t[d+1]=(v*N>>T)*z,t[d+2]=(y*N>>T)*z):t[d]=t[d+1]=t[d+2]=0,p-=w,v-=_,y-=m,g-=x,w-=P.r,_-=P.g,m-=P.b,x-=P.a,c=l+((c=i+r+1)<k?c:k)<<2,b+=P.r=t[c],B+=P.g=t[c+1],M+=P.b=t[c+2],I+=P.a=t[c+3],p+=b,v+=B,y+=M,g+=I,P=P.next,w+=A=q.r,_+=C=q.g,m+=D=q.b,x+=z=q.a,b-=A,B-=C,M-=D,I-=z,q=q.next,d=d+4|0;l+=e}for(i=0;e>i;i=i+1|0){for(B=M=I=b=v=y=g=p=0,d=i<<2,w=L*(A=t[d]),_=L*(C=t[d+1]),m=L*(D=t[d+2]),x=L*(z=t[d+3]),p+=U*A,v+=U*C,y+=U*D,g+=U*z,E=G,h=e,s=0;L>s;s=s+1|0)E.r=A,E.g=C,E.b=D,E.a=z,E=E.next;for(s=1;r>=s;s=s+1|0)d=h+i<<2,p+=(E.r=A=t[d])*(O=L-s),v+=(E.g=C=t[d+1])*O,y+=(E.b=D=t[d+2])*O,g+=(E.a=z=t[d+3])*O,b+=A,B+=C,M+=D,I+=z,E=E.next,F>s&&(h+=e);for(d=i,P=G,q=S,u=0;n>u;u=u+1|0)c=d<<2,t[c+3]=z=g*N>>T,z>0?(z=255/z,t[c]=(p*N>>T)*z,t[c+1]=(v*N>>T)*z,t[c+2]=(y*N>>T)*z):t[c]=t[c+1]=t[c+2]=0,p-=w,v-=_,y-=m,g-=x,w-=P.r,_-=P.g,m-=P.b,x-=P.a,c=i+((c=u+L)<F?c:F)*e<<2,p+=b+=P.r=t[c],v+=B+=P.g=t[c+1],y+=M+=P.b=t[c+2],g+=I+=P.a=t[c+3],P=P.next,w+=A=q.r,_+=C=q.g,m+=D=q.b,x+=z=q.a,b-=A,B-=C,M-=D,I-=z,q=q.next,d+=e}},n._rgb=function(t,r,e,n){var i,u,s,c,h,d,l,p,v,y,g,w,_,m,x,b,B,M,I,A,C,D=r+r+1,z=e-1,O=n-1,S=r+1,R=S*(S+1)/2,k=new a,F=k;for(s=1;D>s;s=s+1|0)F=F.next=new a,s===S&&(C=F);F.next=k;var L=null,U=null;l=d=0;var G=o[r],E=f[r];for(u=0;n>u;u=u+1|0){for(m=x=b=p=v=y=0,g=S*(B=t[d]),w=S*(M=t[d+1]),_=S*(I=t[d+2]),p+=R*B,v+=R*M,y+=R*I,F=k,s=0;S>s;s=s+1|0)F.r=B,F.g=M,F.b=I,F=F.next;for(s=1;S>s;s=s+1|0)c=d+((s>z?z:s)<<2),p+=(F.r=B=t[c])*(A=S-s),v+=(F.g=M=t[c+1])*A,y+=(F.b=I=t[c+2])*A,m+=B,x+=M,b+=I,F=F.next;for(L=k,U=C,i=0;e>i;i=i+1|0)t[d]=p*G>>E,t[d+1]=v*G>>E,t[d+2]=y*G>>E,p-=g,v-=w,y-=_,g-=L.r,w-=L.g,_-=L.b,c=l+((c=i+r+1)<z?c:z)<<2,m+=L.r=t[c],x+=L.g=t[c+1],b+=L.b=t[c+2],p+=m,v+=x,y+=b,L=L.next,g+=B=U.r,w+=M=U.g,_+=I=U.b,m-=B,x-=M,b-=I,U=U.next,d=d+4|0;l+=e}for(i=0;e>i;i=i+1|0){for(x=b=m=v=y=p=0,d=i<<2,g=S*(B=t[d]),w=S*(M=t[d+1]),_=S*(I=t[d+2]),p+=R*B,v+=R*M,y+=R*I,F=k,h=e,s=0;S>s;s=s+1|0)F.r=B,F.g=M,F.b=I,F=F.next;for(s=1;r>=s;s=s+1|0)d=h+i<<2,p+=(F.r=B=t[d])*(A=S-s),v+=(F.g=M=t[d+1])*A,y+=(F.b=I=t[d+2])*A,m+=B,x+=M,b+=I,F=F.next,O>s&&(h+=e);for(d=i,L=k,U=C,u=0;n>u;u=u+1|0)c=d<<2,t[c]=p*G>>E,t[c+1]=v*G>>E,t[c+2]=y*G>>E,p-=g,v-=w,y-=_,g-=L.r,w-=L.g,_-=L.b,c=i+((c=u+S)<O?c:O)*e<<2,p+=m+=L.r=t[c],v+=x+=L.g=t[c+1],y+=b+=L.b=t[c+2],L=L.next,g+=B=U.r,w+=M=U.g,_+=I=U.b,m-=B,x-=M,b-=I,U=U.next,d+=e}},t}()}(window),function(t){"use strict";var r=t.Igata;r.Convolution=function(){function t(t){a.call(this,t)}var a=r.Filter,e=r._round,o=r._sqrt,f=r._floor,n=r._PI,i=r._exp;r.extend(a,t);var u=t.prototype;return u.constructor=t,u.filter=function(t){var r,a=this.bitmap,e=a.context,o=this.imageData(a);"undefined"==typeof t&&(t=[1,1,1,1,.7,-1,-1,-1,-1]),r=this.convolute(e,o,t,!0),e.putImageData(r,0,0)},u.sharpen=function(t){var r,a=this.bitmap,e=a.context,o=this.imageData(a),f=[0,-1,0,-1,5,-1,0,-1,0];t=!!t,r=this.convolute(e,o,f,t),e.putImageData(r,0,0)},u.blur=function(t){(isNaN(t)||0>=t)&&(t=1/9);var r,a=this.bitmap,e=a.context,o=this.imageData(a),f=[t,t,t,t,t,t,t,t,t];r=this.convolute(e,o,f,!1),e.putImageData(r,0,0)},u.gaussian=function(t){var r,a,e,f=this.bitmap,u=f.context,s=this.imageData(f),c=[],h=.849321800288,d=1/o(2*n)/h,l=0;for(a=-t;t>=a;a++)for(e=-t;t>=e;e++)l=d*i(-(e*e+a*a)/(2*h*h)),c.push(l);console.log("gaussian ",t,c),r=this.convolute(u,s,c,!1),u.putImageData(r,0,0)},u.convolute=function(t,r,a,n){var i,u,s,c,h,d,l,p,v,y,g,w,_,m,x,b=e(o(a.length)),B=f(.5*b),M=r.data,I=r.width,A=r.height,C=I,D=A,z=t.createImageData(C,D),O=z.data,S=n?1:0;for(i=0;D>i;i=i+1|0)for(u=0;C>u;u=u+1|0){for(s=i,c=u,h=4*(i*C+u),d=0,l=0,p=0,v=0,y=0;b>y;y=y+1|0)for(g=0;b>g;g=g+1|0)w=s+y-B,_=c+g-B,w>=0&&A>w&&_>=0&&I>_&&(m=4*(w*I+_),x=a[y*b+g],d+=M[m]*x,l+=M[m+1]*x,p+=M[m+2]*x,v+=M[m+3]*x);O[h]=d,O[h+1]=l,O[h+2]=p,O[h+3]=v+S*(255-v)}return z},t}()}(window),function(t){"use strict";var r=(t.document,t.Igata);r.Match=function(){function t(){}var a=r._abs,e=r._sqrt,o=t.prototype;return o.constructor=t,t.overall=function(t,r,a){var e,o,f=t[0].length===r[0].length?t[0].length:null,n=t.length===r.length?t.length:null;if(null===f||null===n)throw new Error("Matrices don't have the same size.");for(e=0;f>e;e=e+1|0)for(o=0;n>o;o=o+1|0)a(t[e][o],r[e][o])},t.mean=function(t){var r,a,e=0,o=t[0].length,f=t.length;for(r=0;o>r;r=r+1|0)for(a=0;f>a;a=a+1|0)e+=t[r][a];return console.log("mean ",e,o,f,e/(o*f)),e/(o*f)},t.sad=function(r,e){var o=0;return t.overall(r,e,function(t,r){o+=a(t-r)}),o},t.ssd=function(r,a){var e=0;return t.overall(r,a,function(t,r){var a=t-r;e+=a*a}),e},t.zncc=function(r,a){var o,f=t.mean(r),n=t.mean(a),i=0,u=0,s=0;return t.overall(r,a,function(t,r){var a=t-f,e=r-n;i+=a*e,u+=a*a,s+=e*e}),o=e(u*s),i/o},t}()}(window),function(t){"use strict";var r=(t.document,t.Igata);r.Template=function(){function t(){}var a=r.Grayscale,e=r._abs,o=t.prototype;return o.constructor=t,o.match=function(t,r,e){var o,f,n,i,u,s,c,h,d,l,p,v,y,g=new Uint8ClampedArray(t.data),w=new Uint8ClampedArray(r.data);for(e=e||.9,a.to(g),a.to(w),o=t.height,f=t.width,n=r.height,i=r.width,u=0,s=o-n+1;s>u;u=u+1|0)for(c=0,h=f-i+1;h>c;c=c+1|0)for(p=0,d=0;n>d;d=d+1|0)for(l=0;i>l;l=l+1|0)y=l+i*d,v=c+l+f*(u+d),g[v]===w[y]&&(p=p+1|0);return p>=i*n*e},o.sad=function(t,r,o){var f,n,i,u,s,c,h,d,l,p,v,y,g,w,_,m,x,b=new Uint8ClampedArray(t.data),B=new Uint8ClampedArray(r.data);o=o||.2,a.to(b),a.to(B),f=t.height,n=t.width,i=r.height,u=r.width,x=u*i*256;var M=Date.now();for(console.log("sad ",M),s=0,c=f-i+1;c>s;s=s+1|0)for(h=0,d=n-u+1;d>h;h=h+1|0){for(v=0,y=0,_=!1,l=0;i>l;l=l+1|0)if(!_)for(p=0;u>p;p=p+1|0)_||(w=p+u*l,g=h+p+n*(s+l),v+=e(b[g]-B[w]),y=v/x,y>o&&(_=!0));o>=y&&(o=y,console.log("normal ",y,v,x),m={normalize:y,similar:v,x:h,y:s,width:u,height:i})}return console.log("------------------------- ",(Date.now()-M)/1e3),m},t}()}(window),function(t){"use strict";function r(t){return 65280&t}function a(t){return 255&t}function e(t){return s[(65280&t)>>8]}var o=t.Igata,f=o,n=f.U8_t,i=f.S32_t,u=f.F32_t,s=new Int32Array([-1,1,4,-1,4,-1,-1,-1,8,-1,-1,-1,-1,-1,-1,-1,8]);f.dataType=r,f.get_data_type=r,f.channel=a,f.get_channel=a,f.dataTypeSize=e,f.get_data_type_size=e;var c=function(){function t(t,r){this.size=-8&(t+7|0),"undefined"==typeof r?this.buffer=new ArrayBuffer(this.size):(this.buffer=r,this.size=r.length),this.u8=new Uint8Array(this.buffer),this.i32=new Int32Array(this.buffer),this.f32=new Float32Array(this.buffer),this.f64=new Float64Array(this.buffer)}var r=t.prototype;return r.constructor=t,t}(),h=function(){function t(t,e,o,f){this.type=0|r(o),this.channel=0|a(o),this.cols=0|t,this.rows=0|e,"undefined"==typeof f?this.allocate():(this.buffer=f,this.data=this.type&n?this.buffer.u8:this.type&i?this.buffer.i32:this.type&u?this.buffer.f32:this.buffer.f64)}var o=t.prototype;return o.constructor=t,o.allocate=function(){delete this.data,delete this.buffer,this.buffer=new c(this.cols*e(this.type)*this.channel*this.rows),this.data=this.type&n?this.buffer.u8:this.type&i?this.buffer.i32:this.type&u?this.buffer.f32:this.buffer.f64},o.copy=function(t){for(var r=t.data,a=this.data,e=0,o=this.cols*this.rows*this.channel|0,f=o-4;f>e;e+=4)r[e]=a[e],r[e+1]=a[e+1],r[e+2]=a[e+2],r[e+3]=a[e+3];for(;o>e;++e)r[e]=a[e]},o.copy_to=function(t){this.copy(t)},o.resize=function(t,r,a){"undefined"==typeof a&&(a=this.channel);var o=t*e(this.type)*a*r;o>this.buffer.size?(this.cols=t,this.rows=r,this.channel=a,this.allocate()):(this.cols=t,this.rows=r,this.channel=a)},t}(),d=function(){function t(t,r,a,e,o){"undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=0),"undefined"==typeof a&&(a=0),"undefined"==typeof e&&(e=0),"undefined"==typeof o&&(o=-1),this.x=t,this.y=r,this.score=a,this.level=e,this.angle=o}var r=t.prototype;return r.constructor=t,t}();f.Data_t=c,f.Matrix_t=h,f.Keypoint_t=d}(window),function(t){"use strict";var r=t.Igata,a=r,e=a.Data_t,o=function(){function t(t){this.next=null;var r=new e(t);this.data=r,this.size=r.size,this.buffer=r.buffer,this.u8=r.u8,this.i32=r.i32,this.f32=r.f32,this.f64=r.f64}var r=t.prototype;return r.constructor=t,r.resize=function(t){delete this.data;var r=new e(t);this.data=r,this.size=r.size,this.buffer=r.buffer,this.u8=r.u8,this.i32=r.i32,this.f32=r.f32,this.f64=r.f64},t}(),f=function(){function t(){throw new Error("Cache can't create instance.")}var r,a,e=0,f=t.prototype;return f.constructor=t,t.allocate=function(t,f){var n,i;for(r=a=new o(f),i=0;t>i;++i)n=new o(f),a=a.next=n,e++},t.getBuffer=function(t){var a=r;return r=r.next,e--,t>a.size&&a.resize(t),a},t.get_buffer=function(r){return t.getBuffer(r)},t.putBuffer=function(t){a=a.next=t,e++},t.put_buffer=function(r){t.putBuffer(r)},t}();f.allocate(30,2560),a.Cache=f}(window),function(t){"use strict";var r=(t.document,t.Igata),a=r,e=function(){function t(){throw new Error("Calc can't create instance.")}var r=new Int32Array(96),e=a.Cache,o=a.U8_t,f=(a.S32_t,a.F32_t,a.S64_t,a.F64_t,t.prototype);return f.constructor=t,t.kernel=function(t,r,a,f){var n=0,i=0,u=0,s=0,c=0,h=0,d=e.getBuffer(t<<2),l=d.f32;if(1===(1&t)&&7>=t&&0>=r)switch(t>>1){case 0:l[0]=1,h=1;break;case 1:l[0]=.25,l[1]=.5,l[2]=.25,h=1;break;case 2:l[0]=.0625,l[1]=.25,l[2]=.375,l[3]=.25,l[4]=.0625,h=1;break;case 3:l[0]=.03125,l[1]=.109375,l[2]=.21875,l[3]=.28125,l[4]=.21875,l[5]=.109375,l[6]=.03125,h=1}else for(s=r>0?r:.3*(.5*(t-1)-1)+.8,c=-.5/(s*s);t>n;++n)i=n-.5*(t-1),u=Math.exp(c*i*i),l[n]=u,h+=u;if(f&o)for(h=256/h,n=0;t>n;++n)a[n]=l[n]*h+.5|0;else for(h=1/h,n=0;t>n;++n)a[n]=l[n]*h;e.putBuffer(d)},t.get_gaussian_kernel=function(r,a,e,o){t.kernel(r,a,e,o)},t.perspective4=function(t,r,a,e,o,f,n,i,u,s,c,h,d,l,p,v,y){var g=r,w=s,_=n,m=g*w*_,x=p,b=g*x,B=w*b,M=c,I=g*M,A=f,C=a,D=l,z=C*D,O=z*A,S=D*A*M,R=D*_,k=D*M,F=w*_,L=x*w,U=x*A,G=M*A,E=1/(R-k-F+L-U+G),P=g*D,q=C*A,N=_*g,T=x*N,V=C*w,Y=z*M,j=C*M*A,Q=_*x*w,X=x*C,H=-(B-m+I*A-A*b-z*w+O-S+R*w)*E,K=(m-B-P*_+P*M+O-w*q+U*w-S)*E,J=g,W=(-M*b+T+V*_-z*_+Y-j+U*M-Q)*E,Z=(-T+N*M-X*w+Y-j+X*A+Q-R*M)*E,$=C,tt=(-I+N+V-q+k-R-L+U)*E,rt=(-b+I+z-V+U-G-R+F)*E;g=e,w=h,_=u,m=g*w*_,x=y,b=g*x,B=w*b,M=d,I=g*M,A=i,C=o,D=v,z=C*D,O=z*A,S=D*A*M,R=D*_,k=D*M,F=w*_,L=x*w,U=x*A,G=M*A,E=1/(R-k-F+L-U+G),P=g*D,q=C*A,N=_*g,T=x*N,V=C*w,Y=z*M,j=C*M*A,Q=_*x*w,X=x*C;var at=-(B-m+I*A-A*b-z*w+O-S+R*w)*E,et=(m-B-P*_+P*M+O-w*q+U*w-S)*E,ot=g,ft=(-M*b+T+V*_-z*_+Y-j+U*M-Q)*E,nt=(-T+N*M-X*w+Y-j+X*A+Q-R*M)*E,it=C,ut=(-I+N+V-q+k-R-L+U)*E,st=(-b+I+z-V+U-G-R+F)*E;w=Z-rt*$,_=H*Z,m=H*$,b=W*K,B=J*W,I=K*tt;var ct=J*tt;D=1/(_-m*rt-b+B*rt+I*$-ct*Z),O=-W+$*tt;var ht=-W*rt+Z*tt;G=-K+J*rt;var dt=H-ct;q=H*rt-I,N=-K*$+J*Z;var lt=m-B,pt=_-b;j=w*D;var vt=G*D,yt=N*D,gt=t.data;gt[0]=at*j+et*(O*D)-ot*(ht*D),gt[1]=at*vt+et*(dt*D)-ot*(q*D),gt[2]=-at*yt-et*(lt*D)+ot*(pt*D),gt[3]=ft*j+nt*(O*D)-it*(ht*D),gt[4]=ft*vt+nt*(dt*D)-it*(q*D),gt[5]=-ft*yt-nt*(lt*D)+it*(pt*D),gt[6]=ut*j+st*(O*D)-ht*D,gt[7]=ut*vt+st*(dt*D)-q*D,gt[8]=-ut*yt-st*(lt*D)+pt*D},t.perspective_4point_transform=function(r,a,e,o,f,n,i,u,s,c,h,d,l,p,v,y,g){t.perspective4(r,a,e,o,f,n,i,u,s,c,h,d,l,p,v,y,g)},t.qsort=function(t,a,e,o){var f,n,i,u,s=7,c=0,h=0,d=0,l=0,p=0,v=0,y=0,g=0,w=0,_=0,m=0,x=0,b=0,B=0,M=0,I=0,A=0,C=0,D=r;if(!(1>=e-a+1))for(D[0]=a,D[1]=e;c>=0;)for(h=D[c<<1],d=D[(c<<1)+1],c--;;){if(p=d-h+1,s>=p){for(y=h+1;d>=y;y++)for(g=y;g>h&&o(t[g],t[g-1]);g--)f=t[g],t[g]=t[g-1],t[g-1]=f;break}for(C=0,_=h,x=d,B=h+(p>>1),p>40&&(w=p>>3,M=h,I=h+w,A=h+(w<<1),n=t[M],i=t[I],u=t[A],h=o(n,i)?o(i,u)?I:o(n,u)?A:M:o(u,i)?I:o(n,u)?M:A,M=B-w,I=B,A=B+w,n=t[M],i=t[I],u=t[A],B=o(n,i)?o(i,u)?I:o(n,u)?A:M:o(u,i)?I:o(n,u)?M:A,M=d-(w<<1),I=d-w,A=d,n=t[M],i=t[I],u=t[A],d=o(n,i)?o(i,u)?I:o(n,u)?A:M:o(u,i)?I:o(n,u)?M:A),M=h,I=B,A=d,n=t[M],i=t[I],u=t[A],B=o(n,i)?o(i,u)?I:o(n,u)?A:M:o(u,i)?I:o(n,u)?M:A,B!==_&&(f=t[B],t[B]=t[_],t[_]=f,B=_),h=m=_+1,d=b=x,n=t[B];;){for(;d>=h&&!o(n,t[h]);)o(t[h],n)||(h>m&&(f=t[m],t[m]=t[h],t[h]=f),C=1,m++),h++;for(;d>=h&&!o(t[d],n);)o(n,t[d])||(b>d&&(f=t[b],t[b]=t[d],t[d]=f),C=1,b--),d--;if(h>d)break;f=t[h],t[h]=t[d],t[d]=f,C=1,h++,d--}if(0===C){for(h=_,d=x,y=h+1;d>=y;y++)for(g=y;g>h&&o(t[g],t[g-1]);g--)f=t[g],t[g]=t[g-1],t[g-1]=f;break}for(p=Math.min(m-_,h-m),v=h-p|0,l=0;p>l;++l,++v)f=t[_+l],t[_+l]=t[v],t[v]=f;for(p=Math.min(x-b,b-d),v=x-p+1|0,l=0;p>l;++l,++v)f=t[h+l],t[h+l]=t[v],t[v]=f;if(p=h-m,v=b-d,p>1)v>1?p>v?(++c,D[c<<1]=_,D[(c<<1)+1]=_+p-1,h=x-v+1,d=x):(++c,D[c<<1]=x-v+1,D[(c<<1)+1]=x,h=_,d=_+p-1):(h=_,d=_+p-1);else{if(!(v>1))break;h=x-v+1,d=x}}},t.median=function(t,r,a){for(var e,o=0,f=0,n=0,i=r+a>>1;;){if(r>=a)return t[i];if(a===r+1)return t[r]>t[a]&&(e=t[r],t[r]=t[a],t[a]=e),t[i];for(o=r+a>>1,t[o]>t[a]&&(e=t[o],t[o]=t[a],t[a]=e),t[r]>t[a]&&(e=t[r],t[r]=t[a],t[a]=e),t[o]>t[r]&&(e=t[o],t[o]=t[r],t[r]=e),f=r+1,e=t[o],t[o]=t[f],t[f]=e,n=a;;){do++f;while(t[r]>t[f]);do--n;while(t[n]>t[r]);if(f>n)break;e=t[f],t[f]=t[n],t[n]=e}e=t[r],t[r]=t[n],t[n]=e,i>=n?r=f:n>=i&&(a=n-1)}return 0},t}();a.Calc=e}(window),function(t){"use strict";var r=t.Igata,a=r,e=function(){function t(){throw new Error("MatrixMath can't create instance.")}var r=t.prototype;return r.constructor=t,t.identity=function(t,r){"undefined"==typeof r&&(r=1);for(var a=t.data,e=t.rows,o=t.cols,f=o+1|0,n=e*o,i=n;--n>=0;)a[n]=0;for(n=i,i=0;n>i;)a[i]=r,i+=f},t.transpose=function(t,r){for(var a=0,e=0,o=r.rows,f=r.cols,n=0,i=0,u=0,s=r.data,c=t.data;o>a;i+=1,n+=f,a++)for(u=i,e=0;f>e;u+=o,e++)c[u]=s[n+e]},t.multiply=function(t,r,a){for(var e=0,o=0,f=0,n=0,i=0,u=0,s=0,c=0,h=r.cols,d=r.rows,l=a.cols,p=r.data,v=a.data,y=t.data,g=0;d>e;n+=h,e++)for(s=0,o=0;l>o;c++,s++,o++){for(u=s,i=n,g=0,f=0;h>f;i++,u+=l,f++)g+=p[i]*v[u];y[c]=g}},t.multiply_ABt=function(t,r,a){for(var e=0,o=0,f=0,n=0,i=0,u=0,s=0,c=r.cols,h=r.rows,d=a.rows,l=r.data,p=a.data,v=t.data,y=0;h>e;n+=c,e++)for(u=0,o=0;d>o;s++,o++){for(i=n,y=0,f=0;c>f;i++,u++,f++)y+=l[i]*p[u];v[s]=y}},t.multiply_AtB=function(t,r,a){for(var e=0,o=0,f=0,n=0,i=0,u=0,s=0,c=0,h=r.cols,d=r.rows,l=a.cols,p=r.data,v=a.data,y=t.data,g=0;h>e;n++,e++)for(s=0,o=0;l>o;c++,s++,o++){for(u=s,i=n,g=0,f=0;d>f;i+=h,u+=l,f++)g+=p[i]*v[u];y[c]=g}},t.multiply_AAt=function(t,r){for(var a=0,e=0,o=0,f=0,n=0,i=0,u=0,s=0,c=0,h=r.cols,d=r.rows,l=r.data,p=t.data,v=0;d>a;f+=d+1,n=i,a++)for(s=f,c=f,u=n,e=a;d>e;s++,c+=d,e++){for(i=n,v=0,o=0;h>o;o++)v+=l[i++]*l[u++];p[s]=v,p[c]=v}},t.multiply_AtA=function(t,r){for(var a=0,e=0,o=0,f=0,n=0,i=0,u=0,s=0,c=0,h=r.cols,d=r.rows,l=r.data,p=t.data,v=0;h>a;u+=h,a++)for(f=a,c=u+a,s=c,e=a;h>e;s++,c+=h,e++){for(n=f,i=e,v=0,o=0;d>o;n+=h,i+=h,o++)v+=l[n]*l[i];p[s]=v,p[c]=v}},t.identity_3x3=function(t,r){"undefined"==typeof r&&(r=1);var a=t.data;a[0]=a[4]=a[8]=r,a[1]=a[2]=a[3]=0,a[5]=a[6]=a[7]=0},t.invert_3x3=function(t,r){var a=t.data,e=r.data,o=a[4],f=a[8],n=a[5],i=a[7],u=a[0],s=u*o,c=u*n,h=a[3],d=a[1],l=h*d,p=a[2],v=h*p,y=a[6],g=y*d,w=y*p,_=1/(s*f-c*i-l*f+v*i+g*n-w*o);e[0]=(o*f-n*i)*_,e[1]=-(d*f-p*i)*_,e[2]=-(-d*n+p*o)*_,e[3]=-(h*f-n*y)*_,e[4]=(u*f-w)*_,e[5]=-(c-v)*_,e[6]=-(-h*i+o*y)*_,e[7]=-(u*i-g)*_,e[8]=(s-l)*_},t.multiply_3x3=function(t,r,a){var e=t.data,o=r.data,f=a.data,n=o[0],i=o[1],u=o[2],s=o[3],c=o[4],h=o[5],d=o[6],l=o[7],p=o[8],v=f[0],y=f[1],g=f[2],w=f[3],_=f[4],m=f[5],x=f[6],b=f[7],B=f[8];e[0]=n*v+i*w+u*x,e[1]=n*y+i*_+u*b,e[2]=n*g+i*m+u*B,e[3]=s*v+c*w+h*x,e[4]=s*y+c*_+h*b,e[5]=s*g+c*m+h*B,e[6]=d*v+l*w+p*x,e[7]=d*y+l*_+p*b,e[8]=d*g+l*m+p*B},t.mat3x3_determinant=function(t){var r=t.data;return r[0]*r[4]*r[8]-r[0]*r[5]*r[7]-r[3]*r[1]*r[8]+r[3]*r[2]*r[7]+r[6]*r[1]*r[5]-r[6]*r[2]*r[4]},t.determinant_3x3=function(t,r,a,e,o,f,n,i,u){return t*o*u-t*f*i-e*r*u+e*a*i+n*r*f-n*a*o},t}();a.MatrixMath=e,a.MM=e}(window),function(t){"use strict";function r(t,r,a,e){e=t[r],t[r]=t[a],t[a]=e}function a(t,r){return t=Math.abs(t),r=Math.abs(r),t>r?(r/=t,t*Math.sqrt(1+r*r)):r>0?(t/=r,r*Math.sqrt(1+t*t)):0}function e(t,e,o,n,u,s){var c=f.EPSILON,h=0,d=0,l=0,p=0,v=0,y=0,g=0,w=0,_=0,m=s*s*30,x=0,b=0,B=0,M=0,I=0,A=0,C=0,D=0,z=0,O=i.getBuffer(s<<2),S=i.getBuffer(s<<2),R=O.i32,k=S.i32;if(n)for(;s>h;h++){for(l=h*u,d=0;s>d;d++)n[l+d]=0;n[l+h]=1}for(l=0;s>l;l++){if(o[l]=t[(e+1)*l],s-1>l){for(p=l+1,x=Math.abs(t[e*l+p]),h=l+2;s>h;h++)b=Math.abs(t[e*l+h]),b>x&&(x=b,p=h);R[l]=p}if(l>0){for(p=0,x=Math.abs(t[l]),h=1;l>h;h++)b=Math.abs(t[e*h+l]),b>x&&(x=b,p=h);k[l]=p}}if(s>1)for(;m>_;_++){for(l=0,x=Math.abs(t[R[0]]),h=1;s-1>h;h++)b=Math.abs(t[e*h+R[h]]),b>x&&(x=b,l=h);for(v=R[l],h=1;s>h;h++)b=Math.abs(t[e*k[h]+h]),b>x&&(x=b,l=k[h],v=h);if(B=t[e*l+v],Math.abs(B)<=c)break;for(M=.5*(o[v]-o[l]),I=Math.abs(M)+a(B,M),A=a(B,I),C=I/A,A=B/A,I=B/I*B,0>M&&(A=-A,I=-I),t[e*l+v]=0,o[l]-=I,o[v]+=I,h=0;l>h;h++)g=e*h+l,w=e*h+v,D=t[g],z=t[w],t[g]=D*C-z*A,t[w]=D*A+z*C;for(h=l+1;v>h;h++)g=e*l+h,w=e*h+v,D=t[g],z=t[w],t[g]=D*C-z*A,t[w]=D*A+z*C;for(h=v+1,g=e*l+h,w=e*v+h;s>h;h++,g++,w++)D=t[g],z=t[w],t[g]=D*C-z*A,t[w]=D*A+z*C;if(n)for(g=u*l,w=u*v,h=0;s>h;h++,g++,w++)D=n[g],z=n[w],n[g]=D*C-z*A,n[w]=D*A+z*C;for(d=0;2>d;d++){if(y=0===d?l:v,s-1>y){for(p=y+1,x=Math.abs(t[e*y+p]),h=y+2;s>h;h++)b=Math.abs(t[e*y+h]),b>x&&(x=b,p=h);R[y]=p}if(y>0){for(p=0,x=Math.abs(t[y]),h=1;y>h;h++)b=Math.abs(t[e*h+y]),b>x&&(x=b,p=h);k[y]=p}}}for(l=0;s-1>l;l++){for(p=l,h=l+1;s>h;h++)o[p]<o[h]&&(p=h);if(l!==p&&(r(o,p,l,x),n))for(h=0;s>h;h++)r(n,u*p+h,u*l+h,x)}i.putBuffer(O),i.putBuffer(S)}function o(t,e,o,n,u,s,c,h){for(var d=2*f.EPSILON,l=f.FLT_MIN,p=0,v=0,y=0,g=0,w=Math.max(s,30),_=0,m=0,x=0,b=0,B=0,M=0,I=0,A=0,C=0,D=0,z=0,O=0,S=0,R=0,k=0,F=0,L=0,U=4660,G=0,E=0,P=0,q=i.getBuffer(c<<3),N=q.f64;c>p;p++){for(y=0,z=0;s>y;y++)A=t[p*e+y],z+=A*A;if(N[p]=z,n){for(y=0;c>y;y++)n[p*u+y]=0;n[p*u+p]=1}}for(;w>g;g++){for(B=0,p=0;c-1>p;p++)for(v=p+1;c>v;v++){for(_=p*e|0,m=v*e|0,k=N[p],F=0,L=N[v],y=2,F+=t[_]*t[m],F+=t[_+1]*t[m+1];s>y;y++)F+=t[_+y]*t[m+y];if(!(Math.abs(F)<=d*Math.sqrt(k*L))){for(F*=2,O=k-L,S=a(F,O),0>O?(R=.5*(S-O),I=Math.sqrt(R/S),M=F/(S*I*2)):(M=Math.sqrt((S+O)/(2*S)),I=F/(S*M*2)),k=0,L=0,y=2,C=M*t[_]+I*t[m],D=-I*t[_]+M*t[m],t[_]=C,t[m]=D,k+=C*C,L+=D*D,C=M*t[_+1]+I*t[m+1],D=-I*t[_+1]+M*t[m+1],t[_+1]=C,t[m+1]=D,k+=C*C,L+=D*D;s>y;y++)C=M*t[_+y]+I*t[m+y],D=-I*t[_+y]+M*t[m+y],t[_+y]=C,t[m+y]=D,k+=C*C,L+=D*D;if(N[p]=k,N[v]=L,B=1,n)for(x=p*u|0,b=v*u|0,y=2,C=M*n[x]+I*n[b],D=-I*n[x]+M*n[b],n[x]=C,n[b]=D,C=M*n[x+1]+I*n[b+1],D=-I*n[x+1]+M*n[b+1],n[x+1]=C,n[b+1]=D;c>y;y++)C=M*n[x+y]+I*n[b+y],D=-I*n[x+y]+M*n[b+y],n[x+y]=C,n[b+y]=D}}if(0===B)break}for(p=0;c>p;p++){for(y=0,z=0;s>y;y++)A=t[p*e+y],z+=A*A;N[p]=Math.sqrt(z)}for(p=0;c-1>p;p++){for(v=p,y=p+1;c>y;y++)N[v]<N[y]&&(v=y);if(p!==v&&(r(N,p,v,z),n)){for(y=0;s>y;y++)r(t,p*e+y,v*e+y,A);for(y=0;c>y;y++)r(n,p*u+y,v*u+y,A)}}for(p=0;c>p;p++)o[p]=N[p];if(!n)return void i.putBuffer(q);for(p=0;h>p;p++){for(z=c>p?N[p]:0;l>=z;){for(E=1/s,y=0;s>y;y++)U=214013*U+2531011,G=0!==(U>>16&32767&256)?E:-E,t[p*e+y]=G;for(g=0;2>g;g++)for(v=0;p>v;v++){for(z=0,y=0;s>y;y++)z+=t[p*e+y]*t[v*e+y];for(P=0,y=0;s>y;y++)A=t[p*e+y]-z*t[v*e+y],t[p*e+y]=A,P+=Math.abs(A);for(P=P?1/P:0,y=0;s>y;y++)t[p*e+y]*=P}for(z=0,y=0;s>y;y++)A=t[p*e+y],z+=A*A;z=Math.sqrt(z)}for(I=1/z,y=0;s>y;y++)t[p*e+y]*=I}i.putBuffer(q)}var f=t.Igata,n=f,i=n.Cache,u=n.Matrix_t,s=n.MM,c=function(){function t(){throw new Error("LinearAlgebra can't create instance.")}var a=t.prototype;return a.constructor=t,t.lu_solve=function(t,a){var e,o,n,i,u=0,s=0,c=0,h=1,d=t.cols,l=t.data,p=a.data;for(u=0;d>u;u++){for(c=u,s=u+1;d>s;s++)Math.abs(l[s*d+u])>Math.abs(l[c*d+u])&&(c=s);if(Math.abs(l[c*d+u])<f.EPSILON)return 0;if(c!==u){for(s=u;d>s;s++)r(l,u*d+s,c*d+s,e);r(p,u,c,e),h=-h}for(n=-1/l[u*d+u],s=u+1;d>s;s++){for(o=l[s*d+u]*n,c=u+1;d>c;c++)l[s*d+c]+=o*l[u*d+c];p[s]+=o*p[u]}l[u*d+u]=-n}for(u=d-1;u>=0;u--){for(i=p[u],c=u+1;d>c;c++)i-=l[u*d+c]*p[c];p[u]=i*l[u*d+u]}return 1},t.cholesky_solve=function(t,r){var a,e,o=0,f=0,n=0,i=0,u=0,s=0,c=0,h=t.cols,d=t.data,l=r.data;for(o=0;h>o;o++)for(e=1,i=o*h,u=i,f=o;h>f;f++){for(a=d[u+o],n=0;o>n;n++)a-=d[n*h+o]*d[u+n];if(f===o){if(d[u+o]=a,0===a)return 0;e=1/a}else d[i+f]=a,d[u+o]=a*e;u+=h}for(i=0,s=0;h>s;s++){for(a=l[s],c=0;s>c;c++)a-=d[i+c]*l[c];l[s]=a,i+=h}for(i=0,s=0;h>s;s++)l[s]/=d[i+s],i+=h;for(s=h-1;s>=0;s--){for(a=l[s],c=s+1,i=c*h;h>c;c++)a-=d[i+s]*l[c],i+=h;l[s]=a}return 1},t.svd_decompose=function(t,r,a,e,n){"undefined"==typeof n&&(n=0);var c=0,h=0,d=t.rows,l=t.cols,p=d,v=l,y=t.type|f.C1_t;v>p&&(c=1,h=p,p=v,v=h);var g=i.getBuffer(p*p<<3),w=i.getBuffer(v<<3),_=i.getBuffer(v*v<<3),m=new u(p,p,y,g.data),x=new u(1,v,y,w.data),b=new u(v,v,y,_.data);if(0===c)s.transpose(m,t);else{for(h=0;l*d>h;h++)m.data[h]=t.data[h];for(;v*p>h;h++)m.data[h]=0}if(o(m.data,p,x.data,b.data,v,p,v,p),r){for(h=0;v>h;h++)r.data[h]=x.data[h];for(;l>h;h++)r.data[h]=0}if(0===c){if(a&&n&f.SVD_U_T)for(h=p*p;--h>=0;)a.data[h]=m.data[h];else a&&s.transpose(a,m);if(e&&n&f.SVD_V_T)for(h=v*v;--h>=0;)e.data[h]=b.data[h];else e&&s.transpose(e,b)}else{if(a&&n&f.SVD_U_T)for(h=v*v;--h>=0;)a.data[h]=b.data[h];else a&&s.transpose(a,b);if(e&&n&f.SVD_V_T)for(h=p*p;--h>=0;)e.data[h]=m.data[h];else e&&s.transpose(e,m)}i.putBuffer(g),i.putBuffer(w),i.putBuffer(_)},t.svd_solve=function(r,a,e){var o=0,n=0,s=0,c=0,h=0,d=r.rows,l=r.cols,p=0,v=0,y=0,g=r.type|f.C1_t,w=i.getBuffer(d*d<<3),_=i.getBuffer(l<<3),m=i.getBuffer(l*l<<3),x=new u(d,d,g,w.data),b=new u(1,l,g,_.data),B=new u(l,l,g,m.data),M=e.data,I=x.data,A=b.data,C=B.data;for(t.svd_decompose(r,b,x,B,0),y=f.EPSILON*A[0]*l;l>o;o++,h+=l){for(v=0,n=0;l>n;n++)if(A[n]>y){for(s=0,p=0,c=0;d>s;s++,c+=l)p+=I[c+n]*M[s];v+=p*C[h+n]/A[n]}a.data[o]=v}i.putBuffer(w),i.putBuffer(_),i.putBuffer(m)},t.svd_invert=function(r,a){var e=0,o=0,n=0,s=0,c=0,h=0,d=a.rows,l=a.cols,p=0,v=0,y=a.type|f.C1_t,g=i.getBuffer(d*d<<3),w=i.getBuffer(l<<3),_=i.getBuffer(l*l<<3),m=new u(d,d,y,g.data),x=new u(1,l,y,w.data),b=new u(l,l,y,_.data),B=r.data,M=m.data,I=x.data,A=b.data;for(t.svd_decompose(a,x,m,b,0),v=f.EPSILON*I[0]*l;l>e;e++,c+=l)for(o=0,s=0;d>o;o++,h++){for(n=0,p=0;l>n;n++,s++)I[n]>v&&(p+=A[c+n]*M[s]/I[n]);B[h]=p}i.putBuffer(g),i.putBuffer(w),i.putBuffer(_)},t.eigenVV=function(t,r,a){for(var o=t.cols,n=o*o,s=t.type|f.C1_t,c=i.getBuffer(o*o<<3),h=i.getBuffer(o<<3),d=new u(o,o,s,c.data),l=new u(1,o,s,h.data);--n>=0;)d.data[n]=t.data[n];if(e(d.data,o,l.data,r?r.data:null,o,o),a)for(;--o>=0;)a.data[o]=l.data[o];i.putBuffer(c),i.putBuffer(h)},t}();n.LinearAlgebra=c,n.LA=c}(window),function(t){"use strict";var r=t.Igata,a=r,e=a.Cache,o=a.Matrix_t,f=a.MM,n=a.LA,i=a.Calc,u=a.F32_t,s=a.C1_t,c=a.EPSILON,h=new o(3,3,u|s),d=new o(3,3,u|s),l=new o(6,6,u|s),p=new o(6,1,u|s),v=new o(9,9,u|s),y=new o(9,9,u|s),g=function(){function t(t,r,a,e,o){for(var f=0,n=0,i=0,u=0,s=0,c=0,h=0,d=0,l=0,p=0,v=0;o>f;++f)n+=t[f].x,i+=t[f].y,c+=r[f].x,h+=r[f].y;for(n/=o,i/=o,c/=o,h/=o,f=0;o>f;++f)p=t[f].x-n,v=t[f].y-i,u+=Math.sqrt(p*p+v*v),p=r[f].x-c,v=r[f].y-h,d+=Math.sqrt(p*p+v*v);u/=o,d/=o,s=Math.SQRT2/u,l=Math.SQRT2/d,a[0]=a[4]=s,a[2]=-n*s,a[5]=-i*s,a[1]=a[3]=a[6]=a[7]=0,a[8]=1,e[0]=e[4]=l,e[2]=-c*l,e[5]=-h*l,e[1]=e[3]=e[6]=e[7]=0,e[8]=1}function r(){}var a=r.prototype;return a.constructor=r,a.run=function(r,a,i,u){var c,v,y=0,g=0,w=i.type|s,_=i.data,m=h.data,x=d.data,b=0,B=0;t(r,a,m,x,u);for(var M=e.getBuffer(2*u*6<<3),I=e.getBuffer(2*u<<3),A=new o(6,2*u,w,M.data),C=new o(1,2*u,w,I.data),D=A.data,z=C.data;u>y;++y)c=r[y],v=a[y],b=m[0]*c.x+m[1]*c.y+m[2],B=m[3]*c.x+m[4]*c.y+m[5],g=2*y*6,D[g]=b,D[g+1]=B,D[g+2]=1,D[g+3]=0,D[g+4]=0,D[g+5]=0,g+=6,D[g]=0,D[g+1]=0,D[g+2]=0,D[g+3]=b,D[g+4]=B,D[g+5]=1,z[y<<1]=x[0]*v.x+x[1]*v.y+x[2],z[(y<<1)+1]=x[3]*v.x+x[4]*v.y+x[5];return f.multiply_AtA(l,A),f.multiply_AtB(p,A,C),n.lu_solve(l,p),_[0]=p.data[0],_[1]=p.data[1],_[2]=p.data[2],_[3]=p.data[3],_[4]=p.data[4],_[5]=p.data[5],_[6]=0,_[7]=0,_[8]=1,f.invert_3x3(d,d),f.multiply_3x3(i,d,i),f.multiply_3x3(i,i,h),e.putBuffer(M),e.putBuffer(I),1},r}(),w=function(){function t(){}var r=t.prototype;return r.constructor=t,r.run=function(t,r,a,e){for(var o=0,i=0,u=a.data,s=h.data,l=d.data,p=v.data,g=y.data,w=0,_=0,m=0,x=0,b=0,B=0,M=0,I=0,A=0,C=0,D=0,z=0;e>o;++o)M+=r[o].x,I+=r[o].y,D+=t[o].x,z+=t[o].y;for(M/=e,I/=e,D/=e,z/=e,o=0;e>o;++o)b+=Math.abs(r[o].x-M),B+=Math.abs(r[o].y-I),A+=Math.abs(t[o].x-D),C+=Math.abs(t[o].y-z);if(Math.abs(b)<c||Math.abs(B)<c||Math.abs(A)<c||Math.abs(C)<c)return 0;for(b=e/b,B=e/B,A=e/A,C=e/C,s[0]=A,s[1]=0,s[2]=-D*A,s[3]=0,s[4]=C,s[5]=-z*C,s[6]=0,s[7]=0,s[8]=1,l[0]=1/b,l[1]=0,l[2]=M,l[3]=0,l[4]=1/B,l[5]=I,l[6]=0,l[7]=0,l[8]=1,o=81;--o>=0;)p[o]=0;for(o=0;e>o;++o)w=(r[o].x-M)*b,_=(r[o].y-I)*B,m=(t[o].x-D)*A,x=(t[o].y-z)*C,p[0]+=m*m,p[1]+=m*x,p[2]+=m,p[6]+=m*-w*m,p[7]+=m*-w*x,p[8]+=m*-w,p[10]+=x*x,p[11]+=x,p[15]+=x*-w*m,p[16]+=x*-w*x,p[17]+=x*-w,p[20]+=1,p[24]+=-w*m,p[25]+=-w*x,p[26]+=-w,p[30]+=m*m,p[31]+=m*x,p[32]+=m,p[33]+=m*-_*m,p[34]+=m*-_*x,p[35]+=m*-_,p[40]+=x*x,p[41]+=x,p[42]+=x*-_*m,p[43]+=x*-_*x,p[44]+=x*-_,p[50]+=1,p[51]+=-_*m,p[52]+=-_*x,p[53]+=-_,p[60]+=-w*m*-w*m+-_*m*-_*m,p[61]+=-w*m*-w*x+-_*m*-_*x,p[62]+=-w*m*-w+-_*m*-_,p[70]+=-w*x*-w*x+-_*x*-_*x,p[71]+=-w*x*-w+-_*x*-_,p[80]+=-w*-w+-_*-_;for(o=0;9>o;++o)for(i=0;o>i;++i)p[9*o+i]=p[9*i+o];return n.eigenVV(v,y),u[0]=g[72],u[1]=g[73],u[2]=g[74],u[3]=g[75],u[4]=g[76],u[5]=g[77],u[6]=g[78],u[7]=g[79],u[8]=g[80],f.multiply_3x3(a,d,a),f.multiply_3x3(a,a,h),w=1/u[8],u[0]*=w,u[1]*=w,u[2]*=w,u[3]*=w,u[4]*=w,u[5]*=w,u[6]*=w,u[7]*=w,u[8]=1,1},r.error=function(t,r,a,e,o){for(var f,n,i=0,u=0,s=0,c=0,h=a.data;o>i;++i)f=t[i],n=r[i],u=1/(h[6]*f.x+h[7]*f.y+1),s=(h[0]*f.x+h[1]*f.y+h[2])*u-n.x,c=(h[3]*f.x+h[4]*f.y+h[5])*u-n.y,
e[i]=s*s+c*c},r.checkSubset=function(t,r,a){if(4===a){var e=0,o=t[0],n=t[1],i=t[2],u=t[3],s=r[0],c=r[1],h=r[2],d=r[3],l=o.x,p=o.y,v=1,y=n.x,g=n.y,w=1,_=i.x,m=i.y,x=1,b=s.x,B=s.y,M=1,I=c.x,A=c.y,C=1,D=h.x,z=h.y,O=1,S=f.determinant_3x3(l,p,v,y,g,w,_,m,x),R=f.determinant_3x3(b,B,M,I,A,C,D,z,O);if(0>S*R&&e++,l=n.x,p=n.y,y=i.x,g=i.y,_=u.x,m=u.y,b=c.x,B=c.y,I=h.x,A=h.y,D=d.x,z=d.y,S=f.determinant_3x3(l,p,v,y,g,w,_,m,x),R=f.determinant_3x3(b,B,M,I,A,C,D,z,O),0>S*R&&e++,l=o.x,p=o.y,y=i.x,g=i.y,_=u.x,m=u.y,b=s.x,B=s.y,I=h.x,A=h.y,D=d.x,z=d.y,S=f.determinant_3x3(l,p,v,y,g,w,_,m,x),R=f.determinant_3x3(b,B,M,I,A,C,D,z,O),0>S*R&&e++,l=o.x,p=o.y,y=n.x,g=n.y,_=u.x,m=u.y,b=s.x,B=s.y,I=c.x,A=c.y,D=d.x,z=d.y,S=f.determinant_3x3(l,p,v,y,g,w,_,m,x),R=f.determinant_3x3(b,B,M,I,A,C,D,z,O),0>S*R&&e++,0!==e&&-4!==e)return!1}return!0},r.check_subset=function(t,r,a){this.checkSubset(t,r,a)},t}(),_=function(){function t(t,r,a,e){"undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=.5),"undefined"==typeof a&&(a=.5),"undefined"==typeof e&&(e=.99),this.size=t,this.thresh=r,this.eps=a,this.prob=e}var r=t.prototype;return r.constructor=t,r.update=function(t,r){var a=Math.log(1-this.prob),e=Math.log(1-Math.pow(1-t,this.size));return 0|(e>=0||-a>=r*-e?r:Math.round(a/e))},r.update_iters=function(t,r){return this.update(t,r)},t}(),m=function(){function t(t,r,a,e,o,f,n){for(var i=1e3,u=[],s=0,c=0,h=0,d=0,l=!1;i>h;++h){for(s=0;e>s&&i>h;){for(l=!1,d=0;!l;)for(l=!0,d=u[s]=0|Math.floor(Math.random()*o),c=0;s>c;++c)if(d===u[c]){l=!1;break}f[s]=r[d],n[s]=a[d],t.check_subset(f,n,s+1)?++s:h++}break}return s===e&&i>h}function a(t,r,a,e,o,f,n,i){var u=0,s=0,c=0,h=f*f;for(t.error(a,e,r,n,o);o>s;++s)c=n[s]<=h,i[s]=c,u+=c;return u}function f(){throw new Error("MotionEstimator can't create instance.")}var n=f.prototype;return n.constructor=f,f.ransac=function(f,n,i,u,c,h,d,l){if("undefined"==typeof l&&(l=1e3),c<f.size)return!1;var p=f.size,v=l,y=0,g=!1,w=[],_=[],m=!1,x=h.cols,b=h.rows,B=h.type|s,M=e.getBuffer(x*b<<3),I=e.getBuffer(c),A=e.getBuffer(c<<2),C=new o(x,b,B,M.data),D=new o(c,1,r.U8C1_t,I.data),z=-1,O=0,S=0,R=A.f32;if(c===p){if(n.run(i,u,C,c)<=0)return e.getBuffer(M),e.getBuffer(I),e.getBuffer(A),!1;if(C.copy_to(h),d)for(;--c>=0;)d.data[c]=1;return e.putBuffer(M),e.putBuffer(I),e.putBuffer(A),!0}for(;v>y;++y){if(m=t(n,i,u,p,c,w,_),!m){if(0===y)return e.putBuffer(M),e.putBuffer(I),e.putBuffer(A),!1;break}S=n.run(w,_,C,p),0>=S||(O=a(n,C,i,u,c,f.thresh,R,D.data),O>Math.max(z,p-1)&&(C.copy_to(h),z=O,d&&D.copy_to(d),v=f.update((c-O)/c,v),g=!0))}return e.putBuffer(M),e.putBuffer(I),e.putBuffer(A),g},f.lmeds=function(f,n,u,c,h,d,l,p){if("undefined"==typeof p&&(p=1e3),h<f.size)return!1;var v=f.size,y=p,g=0,w=!1,_=[],m=[],x=!1,b=d.cols,B=d.rows,M=d.type|s,I=e.getBuffer(b*B<<3),A=e.getBuffer(h),C=e.getBuffer(h<<2),D=new o(b,B,M,I.data),z=new o(h,1,r.U8_t|s,A.data),O=0,S=0,R=C.f32,k=1e9,F=0,L=0;if(f.eps=.45,y=f.update_iters(f.eps,y),h===v){if(n.run(u,c,D,h)<=0)return e.putBuffer(I),e.putBuffer(A),e.putBuffer(C),!1;if(D.copy_to(d),l)for(;--h>=0;)l.data[h]=1;return e.putBuffer(I),e.putBuffer(A),e.putBuffer(C),!0}for(;y>g;++g){if(x=t(n,u,c,v,h,_,m),!x){if(0===g)return e.putBuffer(I),e.putBuffer(A),e.putBuffer(C),!1;break}S=n.run(_,m,D,v),0>=S||(n.error(u,c,D,R,h),L=i.median(R,0,h-1),k>L&&(k=L,D.copy_to(d),w=!0))}return w&&(F=2.5*1.4826*(1+5/(h-v))*Math.sqrt(k),F=Math.max(F,.001),O=a(n,d,u,c,h,F,R,z.data),l&&z.copy_to(l),w=O>=v),e.putBuffer(I),e.putBuffer(A),e.putBuffer(C),w},f}();a.Affine2d=g,a.HomoGraphy2d=w,a.Ransac_t=_,a.MotionEstimator=m,a.Estimator=m}(window),function(t){"use strict";function r(t,r,a,e){for(var o=0,f=t.channel,n=t.cols,u=t.rows,s=t.data,c=r.data,h=n/a,d=u/e,l=h*d*65536|0,p=0,v=0,y=0,g=0,w=0,_=0,m=0,x=0,b=0,B=0,M=0,I=0,A=0,C=0,D=0,z=0,O=i.getBuffer(a*f<<2),S=i.getBuffer(a*f<<2),R=i.getBuffer(2*n*3<<2),k=O.i32,F=S.i32,L=R.i32;a>p;p++){for(b=p*h,B=b+h,w=b+1-1e-6|0,_=0|B,w=Math.min(w,n-1),_=Math.min(_,n-1),w>b&&(L[x++]=p*f|0,L[x++]=(w-1)*f|0,L[x++]=256*(w-b)|0,o++),y=w;_>y;y++)o++,L[x++]=p*f|0,L[x++]=y*f|0,L[x++]=256;B-_>.001&&(o++,L[x++]=p*f|0,L[x++]=_*f|0,L[x++]=256*(B-_)|0)}for(p=0;a*f>p;p++)k[p]=F[p]=0;for(v=0,g=0;u>g;g++){for(M=n*g,x=0;o>x;x++)for(A=L[3*x],w=L[3*x+1],C=L[3*x+2],m=0;f>m;m++)k[A+m]+=s[M+w+m]*C;if(g+1>=(v+1)*d||g===u-1){if(D=256*Math.max(g+1-(v+1)*d,0)|0,z=256-D,I=a*v,0>=D)for(p=0;a*f>p;p++)c[I+p]=Math.min(Math.max((F[p]+256*k[p])/l,0),255),F[p]=k[p]=0;else for(p=0;a*f>p;p++)c[I+p]=Math.min(Math.max((F[p]+k[p]*z)/l,0),255),F[p]=k[p]*D,k[p]=0;v++}else for(p=0;a*f>p;p++)F[p]+=256*k[p],k[p]=0}i.putBuffer(S),i.putBuffer(O),i.putBuffer(R)}function a(t,r,a,e){for(var o=0,f=t.channel,n=t.cols,u=t.rows,s=t.data,c=r.data,h=n/a,d=u/e,l=1/(h*d),p=0,v=0,y=0,g=0,w=0,_=0,m=0,x=0,b=0,B=0,M=0,I=0,A=0,C=0,D=0,z=0,O=i.getBuffer(a*f<<2),S=i.getBuffer(a*f<<2),R=i.getBuffer(2*n*3<<2),k=O.f32,F=S.f32,L=R.f32;a>p;p++){for(b=p*h,B=b+h,w=b+1-1e-6|0,_=0|B,w=Math.min(w,n-1),_=Math.min(_,n-1),w>b&&(o++,L[x++]=(w-1)*f|0,L[x++]=p*f|0,L[x++]=(w-b)*l),y=w;_>y;y++)o++,L[x++]=y*f|0,L[x++]=p*f|0,L[x++]=l;B-_>.001&&(o++,L[x++]=_*f|0,L[x++]=p*f|0,L[x++]=(B-_)*l)}for(p=0;a*f>p;p++)k[p]=F[p]=0;for(v=0,g=0;u>g;g++){for(M=n*g,x=0;o>x;x++)for(w=0|L[3*x],A=0|L[3*x+1],C=L[3*x+2],m=0;f>m;m++)k[A+m]+=s[M+w+m]*C;if(g+1>=(v+1)*d||g===u-1){if(D=Math.max(g+1-(v+1)*d,0),z=1-D,I=a*v,Math.abs(D)<.001)for(p=0;a*f>p;p++)c[I+p]=F[p]+k[p],F[p]=k[p]=0;else for(p=0;a*f>p;p++)c[I+p]=F[p]+k[p]*z,F[p]=k[p]*D,k[p]=0;v++}else for(p=0;a*f>p;p++)F[p]+=k[p],k[p]=0}i.putBuffer(S),i.putBuffer(O),i.putBuffer(R)}function e(t,r,a,e,o,f,n,i){for(var u=0,s=0,c=0,h=0,d=0,l=0,p=0,v=0,y=0,g=f[0],w=0,_=e<<1,m=3*e,x=e<<2;o>u;++u){for(l=r[h],s=0;i>s;++s)t[s]=l;for(s=0;e-2>=s;s+=2)t[s+i]=r[h+s],t[s+i+1]=r[h+s+1];for(;e>s;++s)t[s+i]=r[h+s];for(l=r[h+e-1],s=e;i+e>s;++s)t[s+i]=l;for(s=0;e-4>=s;s+=4){for(l=t[s]*g,p=t[s+1]*g,v=t[s+2]*g,y=t[s+3]*g,c=1;n>c;++c)w=f[c],l+=t[c+s]*w,p+=t[c+s+1]*w,v+=t[c+s+2]*w,y+=t[c+s+3]*w;a[d+s]=Math.min(l>>8,255),a[d+s+1]=Math.min(p>>8,255),a[d+s+2]=Math.min(v>>8,255),a[d+s+3]=Math.min(y>>8,255)}for(;e>s;++s){for(l=t[s]*g,c=1;n>c;++c)l+=t[c+s]*f[c];a[d+s]=Math.min(l>>8,255)}h+=e,d+=e}for(u=0;e>u;++u){for(l=a[u],s=0;i>s;++s)t[s]=l;for(c=u,s=0;o-2>=s;s+=2,c+=_)t[s+i]=a[c],t[s+i+1]=a[c+e];for(;o>s;++s,c+=e)t[s+i]=a[c];for(l=a[(o-1)*e+u],s=o;i+o>s;++s)t[s+i]=l;for(d=u,s=0;o-4>=s;s+=4,d+=x){for(l=t[s]*g,p=t[s+1]*g,v=t[s+2]*g,y=t[s+3]*g,c=1;n>c;++c)w=f[c],l+=t[c+s]*w,p+=t[c+s+1]*w,v+=t[c+s+2]*w,y+=t[c+s+3]*w;a[d]=Math.min(l>>8,255),a[d+e]=Math.min(p>>8,255),a[d+_]=Math.min(v>>8,255),a[d+m]=Math.min(y>>8,255)}for(;o>s;++s,d+=e){for(l=t[s]*g,c=1;n>c;++c)l+=t[c+s]*f[c];a[d]=Math.min(l>>8,255)}}}function o(t,r,a,e,o,f,n,i){for(var u=0,s=0,c=0,h=0,d=0,l=0,p=0,v=0,y=0,g=f[0],w=0,_=e<<1,m=3*e,x=e<<2;o>u;++u){for(l=r[h],s=0;i>s;++s)t[s]=l;for(s=0;e-2>=s;s+=2)t[s+i]=r[h+s],t[s+i+1]=r[h+s+1];for(;e>s;++s)t[s+i]=r[h+s];for(l=r[h+e-1],s=e;i+e>s;++s)t[s+i]=l;for(s=0;e-4>=s;s+=4){for(l=t[s]*g,p=t[s+1]*g,v=t[s+2]*g,y=t[s+3]*g,c=1;n>c;++c)w=f[c],l+=t[c+s]*w,p+=t[c+s+1]*w,v+=t[c+s+2]*w,y+=t[c+s+3]*w;a[d+s]=l,a[d+s+1]=p,a[d+s+2]=v,a[d+s+3]=y}for(;e>s;++s){for(l=t[s]*g,c=1;n>c;++c)l+=t[c+s]*f[c];a[d+s]=l}h+=e,d+=e}for(u=0;e>u;++u){for(l=a[u],s=0;i>s;++s)t[s]=l;for(c=u,s=0;o-2>=s;s+=2,c+=_)t[s+i]=a[c],t[s+i+1]=a[c+e];for(;o>s;++s,c+=e)t[s+i]=a[c];for(l=a[(o-1)*e+u],s=o;i+o>s;++s)t[s+i]=l;for(d=u,s=0;o-4>=s;s+=4,d+=x){for(l=t[s]*g,p=t[s+1]*g,v=t[s+2]*g,y=t[s+3]*g,c=1;n>c;++c)w=f[c],l+=t[c+s]*w,p+=t[c+s+1]*w,v+=t[c+s+2]*w,y+=t[c+s+3]*w;a[d]=l,a[d+e]=p,a[d+_]=v,a[d+m]=y}for(;o>s;++s,d+=e){for(l=t[s]*g,c=1;n>c;++c)l+=t[c+s]*f[c];a[d]=l}}}var f=t.Igata,n=f,i=n.Cache,u=n.Calc,s=n.Matrix_t,c=n.COLOR_RGBA2GRAY,h=n.COLOR_BGRA2GRAY,d=n.COLOR_BGR2GRAY,l=n.COLOR_RGB2GRAY,p=n.BOX_BLUR_NOSCALE,v=n.U8_t,y=n.S32_t,g=function(){function t(){throw new Error("Processing can't create instance.")}var f=t.prototype;return f.constructor=t,t.grayscale=function(t,r,a,e,o){"undefined"==typeof o&&(o=c);var f=0,n=0,i=0,u=0,s=0,p=0,v=4899,y=9617,g=1868,w=4;(o===h||o===d)&&(v=1868,g=4899),(o===l||o===d)&&(w=3);var _=w<<1,m=3*w|0;e.resize(r,a,1);var x,b=e.data;for(n=0;a>n;++n,u+=r,i+=r*w){for(f=0,s=i,p=u,x=r-4;x>=f;f+=4,s+=w<<2,p+=4)b[p]=t[s]*v+t[s+1]*y+t[s+2]*g+8192>>14,b[p+1]=t[s+w]*v+t[s+w+1]*y+t[s+w+2]*g+8192>>14,b[p+2]=t[s+_]*v+t[s+_+1]*y+t[s+_+2]*g+8192>>14,b[p+3]=t[s+m]*v+t[s+m+1]*y+t[s+m+2]*g+8192>>14;for(;r>f;++f,++p,s+=w)b[p]=t[s]*v+t[s+1]*y+t[s+2]*g+8192>>14}},t.resample=function(t,e,o,f){var n=t.rows,i=t.cols;n>f&&i>o&&(e.resize(o,f,t.channel),t.type&v&&e.type&v&&256>n*i/(f*o)?r(t,e,o,f):a(t,e,o,f))},t.boxGray=function(t,r,a,e){"undefined"==typeof e&&(e=0);var o=t.cols,f=t.rows,n=f<<1,u=o<<1,s=0,c=0,h=0,d=0,l=(a<<1)+1|0,v=a+1|0,y=v+1|0,g=e&p?1:1/(l*l),w=i.getBuffer(o*f<<2),_=0,m=0,x=0,b=0,B=0,M=w.i32,I=t.data,A=0;for(r.resize(o,f,t.channel),h=0;f>h;++h){for(m=h,_=v*I[x],s=x+1|0,d=x+a|0;d>=s;++s)_+=I[s];for(b=x+v|0,B=x,A=I[B],c=0;a>c;++c,m+=f)M[m]=_,_+=I[b]-A,b++;for(;o-y>c;c+=2,m+=n)M[m]=_,_+=I[b]-I[B],M[m+f]=_,_+=I[b+1]-I[B+1],b+=2,B+=2;for(;o-v>c;++c,m+=f)M[m]=_,_+=I[b]-I[B],b++,B++;for(A=I[b-1];o>c;++c,m+=f)M[m]=_,_+=A-I[B],B++;x+=o}if(x=0,I=r.data,1===g)for(h=0;o>h;++h){for(m=h,_=v*M[x],s=x+1|0,d=x+a|0;d>=s;++s)_+=M[s];for(b=x+v,B=x,A=M[B],c=0;a>c;++c,m+=o)I[m]=_,_+=M[b]-A,b++;for(;f-y>c;c+=2,m+=u)I[m]=_,_+=M[b]-M[B],I[m+o]=_,_+=M[b+1]-M[B+1],b+=2,B+=2;for(;f-v>c;++c,m+=o)I[m]=_,_+=M[b]-M[B],b++,B++;for(A=M[b-1];f>c;++c,m+=o)I[m]=_,_+=A-M[B],B++;x+=f}else for(h=0;o>h;++h){for(m=h,_=v*M[x],s=x+1|0,d=x+a|0;d>=s;++s)_+=M[s];for(b=x+v,B=x,A=M[B],c=0;a>c;++c,m+=o)I[m]=_*g,_+=M[b]-A,b++;for(;f-y>c;c+=2,m+=u)I[m]=_*g,_+=M[b]-M[B],I[m+o]=_*g,_+=M[b+1]-M[B+1],b+=2,B+=2;for(;f-v>c;++c,m+=o)I[m]=_*g,_+=M[b]-M[B],b++,B++;for(A=M[b-1];f>c;++c,m+=o)I[m]=_*g,_+=A-M[B],B++;x+=f}i.putBuffer(w)},t.box_blur_gray=function(r,a,e,o){t.boxGray(r,a,e,o)},t.gaussian=function(t,r,a,f){"undefined"==typeof f&&(f=0),"undefined"==typeof a&&(a=0),a=0===a?2*Math.max(1,4*f+1-1e-8)+1|0:a;var n=a>>1,s=t.cols,c=t.rows,h=t.type,d=h&v;r.resize(s,c,t.channel);var l,p,g=t.data,w=r.data,_=a+Math.max(c,s)|0,m=i.getBuffer(_<<2),x=i.getBuffer(a<<2);d?(l=m.i32,p=x.i32):h&y?(l=m.i32,p=x.f32):(l=m.f32,p=x.f32),u.kernel(a,f,p,h),d?e(l,g,w,s,c,p,a,n):o(l,g,w,s,c,p,a,n),i.putBuffer(m),i.putBuffer(x)},t.gaussian_blur=function(r,a,e,o){t.gaussian(r,a,e,o)},t.transform=function(t,r,a,e){for(var o,f=t.data,n=t.cols,i=t.rows,u=n,s=0,c=Math.PI,h=Math.round((c-s)/a),d=Math.round((2*(n+i)+1)/r),l=1/r,p=new Int32Array((h+2)*(d+2)),v=new Float32Array(h),y=new Float32Array(h),g=0,w=s;h>g;g++)v[g]=Math.sin(w)*l,y[g]=Math.cos(w)*l,w+=a;var _;for(I=0;i>I;I++)for(_=0;n>_;_++)if(0!==f[I*u+_])for(g=0;h>g;g++)o=Math.round(_*y[g]+I*v[g]),o+=(d-1)/2,p[(g+1)*(d+2)+o+1]+=1;var m,x=[];for(o=0;d>o;o++)for(g=0;h>g;g++)m=(g+1)*(d+2)+o+1,p[m]>e&&p[m]>p[m-1]&&p[m]>=p[m+1]&&p[m]>p[m-d-2]&&p[m]>=p[m+d+2]&&x.push(m);x.sort(function(t,r){return p[t]>p[r]||p[t]===p[r]&&r>t});var b,B,M,I,A=Math.min(h*d,x.length),C=1/(d+2),D=[];for(I=0;A>I;I++)b=x[I],g=Math.floor(b*C)-1,o=b-(g+1)*(d+2)-1,B=(o-.5*(d-1))*r,M=g*a,D.push([B,M]);return D},t.hough_transform=function(r,a,e,o){return t.transform(r,a,e,o)},t.pyrdown=function(t,r,a,e){"undefined"==typeof a&&(a=0),"undefined"==typeof e&&(e=0);var o=t.cols,f=t.rows,n=o>>1,i=f>>1,u=n-(a<<1),s=i-(e<<1),c=0,h=0,d=a+e*o,l=0,p=0,v=0;r.resize(n,i,t.channel);var y=t.data,g=r.data;for(h=0;s>h;++h){for(l=d,v=p,c=0;u-2>=c;c+=2,v+=2,l+=4)g[v]=y[l]+y[l+1]+y[l+o]+y[l+o+1]+2>>2,g[v+1]=y[l+2]+y[l+3]+y[l+o+2]+y[l+o+3]+2>>2;for(;u>c;++c,++v,l+=2)g[v]=y[l]+y[l+1]+y[l+o]+y[l+o+1]+2>>2;d+=o<<1,p+=n}},t.scharrDerivatives=function(t,r){var a,e,o,f,n,u,s,c,h=t.cols,d=t.rows,l=h<<1,p=0,g=0,w=0,_=0,m=0,x=0,b=0;r.resize(h,d,2);var B=t.data,M=r.data,I=i.getBuffer(h+2<<2),A=i.getBuffer(h+2<<2);for(t.type&v||t.type&y?(s=I.i32,c=A.i32):(s=I.f32,c=A.f32);d>g;++g,m+=h){for(_=(g>0?g-1:1)*h|0,x=(d-1>g?g+1:d-2)*h|0,b=g*l|0,p=0,w=1;h-2>=p;p+=2,w+=2)a=B[_+p],e=B[x+p],s[w]=3*(a+e)+10*B[m+p],c[w]=e-a,a=B[_+p+1],e=B[x+p+1],s[w+1]=3*(a+e)+10*B[m+p+1],c[w+1]=e-a;for(;h>p;++p,++w)a=B[_+p],e=B[x+p],s[w]=3*(a+e)+10*B[m+p],c[w]=e-a;for(p=h+1|0,s[0]=s[1],s[p]=s[h],c[0]=c[1],c[p]=c[h],p=0;h-4>=p;p+=4)a=c[p+2],e=c[p+1],o=c[p+3],f=c[p+4],n=s[p+2],u=s[p+3],M[b++]=n-s[p],M[b++]=3*(a+c[p])+10*e,M[b++]=u-s[p+1],M[b++]=3*(o+e)+10*a,M[b++]=s[p+4]-n,M[b++]=3*(f+a)+10*o,M[b++]=s[p+5]-u,M[b++]=3*(c[p+5]+o)+10*f;for(;h>p;++p)M[b++]=s[p+2]-s[p],M[b++]=3*(c[p+2]+c[p])+10*c[p+1]}i.putBuffer(I),i.putBuffer(A)},t.scharr_derivatives=function(r,a){t.scharrDerivatives(r,a)},t.sobelDerivatives=function(t,r){var a,e,o,f,n,u,s,c,h=t.cols,d=t.rows,l=h<<1,p=0,g=0,w=0,_=0,m=0,x=0,b=0;r.resize(h,d,2);var B=t.data,M=r.data,I=i.getBuffer(h+2<<2),A=i.getBuffer(h+2<<2);for(t.type&v||t.type&y?(s=I.i32,c=A.i32):(s=I.f32,c=A.f32);d>g;++g,m+=h){for(_=(g>0?g-1:1)*h|0,x=(d-1>g?g+1:d-2)*h|0,b=g*l|0,p=0,w=1;h-2>=p;p+=2,w+=2)a=B[_+p],e=B[x+p],s[w]=a+e+2*B[m+p],c[w]=e-a,a=B[_+p+1],e=B[x+p+1],s[w+1]=a+e+2*B[m+p+1],c[w+1]=e-a;for(;h>p;++p,++w)a=B[_+p],e=B[x+p],s[w]=a+e+2*B[m+p],c[w]=e-a;for(p=h+1|0,s[0]=s[1],s[p]=s[h],c[0]=c[1],c[p]=c[h],p=0;h-4>=p;p+=4)a=c[p+2],e=c[p+1],o=c[p+3],f=c[p+4],n=s[p+2],u=s[p+3],M[b++]=n-s[p],M[b++]=a+c[p]+2*e,M[b++]=u-s[p+1],M[b++]=o+e+2*a,M[b++]=s[p+4]-n,M[b++]=f+a+2*o,M[b++]=s[p+5]-u,M[b++]=c[p+5]+o+2*f;for(;h>p;++p)M[b++]=s[p+2]-s[p],M[b++]=c[p+2]+c[p]+2*c[p+1]}i.putBuffer(I),i.putBuffer(A)},t.sobel_derivatives=function(r,a){t.sobelDerivatives(r,a)},t.integralImage=function(t,r,a,e){var o=0|t.cols,f=0|t.rows,n=t.data,i=o+1|0,u=0,s=0,c=0,h=0,d=0,l=0,p=0,v=0;if(r&&a){for(;i>d;++d)r[d]=0,a[d]=0;for(c=i+1|0,h=1,d=0,v=0;f>d;++d,++c,++h){for(u=s=0,l=0;o-2>=l;l+=2,v+=2,c+=2,h+=2)p=n[v],u+=p,s+=p*p,r[c]=r[h]+u,a[c]=a[h]+s,p=n[v+1],u+=p,s+=p*p,r[c+1]=r[h+1]+u,a[c+1]=a[h+1]+s;for(;o>l;++l,++v,++c,++h)p=n[v],u+=p,s+=p*p,r[c]=r[h]+u,a[c]=a[h]+s}}else if(r){for(;i>d;++d)r[d]=0;for(c=i+1|0,h=1,d=0,v=0;f>d;++d,++c,++h){for(u=0,l=0;o-2>=l;l+=2,v+=2,c+=2,h+=2)u+=n[v],r[c]=r[h]+u,u+=n[v+1],r[c+1]=r[h+1]+u;for(;o>l;++l,++v,++c,++h)u+=n[v],r[c]=r[h]+u}}else if(a){for(;i>d;++d)a[d]=0;for(c=i+1|0,h=1,d=0,v=0;f>d;++d,++c,++h){for(s=0,l=0;o-2>=l;l+=2,v+=2,c+=2,h+=2)p=n[v],s+=p*p,a[c]=a[h]+s,p=n[v+1],s+=p*p,a[c+1]=a[h+1]+s;for(;o>l;++l,++v,++c,++h)p=n[v],s+=p*p,a[c]=a[h]+s}}if(e){for(d=0;i>d;++d)e[d]=0;for(c=i+1|0,h=0,d=0,v=0;f>d;++d,++c,++h){for(l=0;o-2>=l;l+=2,v+=2,c+=2,h+=2)e[c]=n[v]+e[h],e[c+1]=n[v+1]+e[h+1];for(;o>l;++l,++v,++c,++h)e[c]=n[v]+e[h]}for(c=i+o|0,h=o,d=0;f>d;++d,c+=i,h+=i)e[c]+=e[h];for(l=o-1;l>0;--l)for(c=l+f*i,h=c-i,d=f;d>0;--d,c-=i,h-=i)e[c]+=e[h]+e[h+1]}},t.compute_integral_image=function(r,a,e,o){t.integralImage(r,a,e,o)},t.histogram=function(t,r){var a=t.cols,e=t.rows,o=t.data;r.resize(a,e,t.channel);var f,n,u=r.data,s=a*e,c=0,h=0,d=i.getBuffer(1024);for(f=d.i32;256>c;++c)f[c]=0;for(c=0;s>c;++c)++f[o[c]];for(h=f[0],c=1;256>c;++c)h=f[c]+=h;for(n=255/s,c=0;s>c;++c)u[c]=f[o[c]]*n+.5|0;i.putBuffer(d)},t.equalize_histogram=function(r,a){t.histogram(r,a)},t.canny=function(r,a,e,o){var f=r.cols,u=r.rows;r.data;a.resize(f,u,r.channel);var c=a.data,h=0,d=0,l=0,p=f<<1,v=0,y=0,g=0,w=0,_=0,m=0,x=0,b=0,B=i.getBuffer(u*p<<2),M=i.getBuffer(3*(f+2)<<2),I=i.getBuffer((u+2)*(f+2)<<2),A=i.getBuffer(u*f<<2),C=M.i32,D=I.i32,z=A.i32,O=B.i32,S=new s(f,u,n.S32C2_t,B.data),R=1,k=f+2+1|0,F=2*(f+2)+1|0,L=f+2|0,U=L+1|0,G=0;for(t.sobelDerivatives(r,S),e>o&&(h=e,e=o,o=h),h=3*(f+2)|0;--h>=0;)C[h]=0;for(h=(u+2)*(f+2)|0;--h>=0;)D[h]=0;for(;f>d;++d,l+=2)w=O[l],_=O[l+1],C[k+d]=(w^w>>31)-(w>>31)+((_^_>>31)-(_>>31));for(h=1;u>=h;++h,l+=p){if(h===u)for(d=F+f;--d>=F;)C[d]=0;else for(d=0;f>d;d++)w=O[l+(d<<1)],_=O[l+(d<<1)+1],C[F+d]=(w^w>>31)-(w>>31)+((_^_>>31)-(_>>31));for(v=l-p|0,D[U-1]=0,y=0,d=0;f>d;++d,v+=2){if(g=C[k+d],g>e)if(w=O[v],_=O[v+1],m=w^_,w=(w^w>>31)-(w>>31)|0,_=(_^_>>31)-(_>>31)|0,x=13573*w,b=x+(w+w<<15),_<<=15,x>_){if(g>C[k+d-1]&&g>=C[k+d+1]){g>o&&!y&&2!==D[U+d-L]?(D[U+d]=2,y=1,z[G++]=U+d):D[U+d]=1;continue}}else if(_>b){if(g>C[R+d]&&g>=C[F+d]){g>o&&!y&&2!==D[U+d-L]?(D[U+d]=2,y=1,z[G++]=U+d):D[U+d]=1;continue}}else if(m=0>m?-1:1,g>C[R+d-m]&&g>C[F+d+m]){g>o&&!y&&2!==D[U+d-L]?(D[U+d]=2,y=1,z[G++]=U+d):D[U+d]=1;continue}D[U+d]=0,y=0}D[U+f]=0,U+=L,d=R,R=k,k=F,F=d}for(d=U-L-1,h=0;L>h;++h,++d)D[d]=0;for(;G>0;)U=z[--G],U-=L+1,1===D[U]&&(D[U]=2,z[G++]=U),U+=1,1===D[U]&&(D[U]=2,z[G++]=U),U+=1,1===D[U]&&(D[U]=2,z[G++]=U),U+=L,1===D[U]&&(D[U]=2,z[G++]=U),U-=2,1===D[U]&&(D[U]=2,z[G++]=U),U+=L,1===D[U]&&(D[U]=2,z[G++]=U),U+=1,1===D[U]&&(D[U]=2,z[G++]=U),U+=1,1===D[U]&&(D[U]=2,z[G++]=U);for(U=L+1,R=0,h=0;u>h;++h,U+=L)for(d=0;f>d;++d)c[R++]=255*(2===D[U+d]);i.putBuffer(B),i.putBuffer(M),i.putBuffer(I),i.putBuffer(A)},t.perspective=function(t,r,a,e){"undefined"==typeof e&&(e=0);var o,f=0|t.cols,n=0|t.rows,i=0|r.cols,u=0|r.rows,s=t.data,c=r.data,h=0,d=0,l=0,p=0,v=0,y=0,g=0,w=0,_=0,m=0,x=0,b=0,B=0,M=0,I=0,A=a.data,C=A[0],D=A[1],z=A[2],O=A[3],S=A[4],R=A[5],k=A[6],F=A[7],L=A[8];for(o=0;u>d;++d)for(w=D*d+z,_=S*d+R,m=F*d+L,h=0;i>h;++h,++o,w+=C,_+=O,m+=k)x=1/m,y=w*x,g=_*x,p=0|y,v=0|g,y>0&&g>0&&f-1>p&&n-1>v?(b=Math.max(y-p,0),B=Math.max(g-v,0),l=f*v+p|0,M=s[l]+b*(s[l+1]-s[l]),I=s[l+f]+b*(s[l+f+1]-s[l+f]),c[o]=M+B*(I-M)):c[o]=e},t.warp_perspective=function(r,a,e,o){t.perspective(r,a,e,o)},t.affine=function(t,r,a,e){"undefined"==typeof e&&(e=0);var o,f=t.cols,n=t.rows,i=r.cols,u=r.rows,s=t.data,c=r.data,h=0,d=0,l=0,p=0,v=0,y=0,g=0,w=0,_=0,m=0,x=0,b=a.data,B=b[0],M=b[1],I=b[2],A=b[3],C=b[4],D=b[5];for(o=0;u>d;++d)for(y=M*d+I,g=C*d+D,h=0;i>h;++h,++o,y+=B,g+=A)p=0|y,v=0|g,p>=0&&v>=0&&f-1>p&&n-1>v?(w=y-p,_=g-v,l=f*v+p,m=s[l]+w*(s[l+1]-s[l]),x=s[l+f]+w*(s[l+f+1]-s[l+f]),c[o]=m+_*(x-m)):c[o]=e},t.warp_affine=function(r,a,e,o){t.affine(r,a,e,o)},t.skinDetector=function(t,r){for(var a,e,o,f,n=t.width*t.height;n--;)f=4*n,a=t.data[f],e=t.data[f+1],o=t.data[f+2],a>95&&e>40&&o>20&&a>e&&a>o&&a-Math.min(e,o)>15&&Math.abs(a-e)>15?r[n]=255:r[n]=0},t.skindetector=function(r,a){t.skinDetector(r,a)},t}(),w=function(){function t(t){this.levels=0|t,this.data=new Array(t),this.pyrdown=g.pyrdown}var r=t.prototype;return r.constructor=t,r.allocate=function(t,r,a){for(var e=this.levels;--e>=0;)this.data[e]=new s(t>>e,r>>e,a)},r.build=function(t,r){"undefined"==typeof r&&(r=!0);var a=this.levels,e=this.data,o=2,f=t,n=e[0];if(!r)for(var i=t.cols*t.rows;--i>=0;)n.data[i]=t.data[i];for(n=this.data[1],this.pyrdown(f,n);a>o;++o)f=n,n=e[o],this.pyrdown(f,n)},t}();n.Processing=g,n.Pyramid_t=w}(window),function(t){"use strict";var r=t.Igata,a=r,e=a.U8_t,o=a.Matrix_t,f=a.Processing;a.Orb=function(){function t(t,r,a,e,o,n){var u=Math.cos(a),s=Math.sin(a);i.data[0]=u,i.data[1]=-s,i.data[2]=(-u+s)*n*.5+e,i.data[3]=s,i.data[4]=u,i.data[5]=(-s-u)*n*.5+o,f.affine(t,r,i,128)}function a(){throw new Error("Orb can't create instance.")}var n=new Int32Array([8,-3,9,5,4,2,7,-12,-11,9,-8,2,7,-12,12,-13,2,-13,2,12,1,-7,1,6,-2,-10,-2,-4,-13,-13,-11,-8,-13,-3,-12,-9,10,4,11,9,-13,-8,-8,-9,-11,7,-9,12,7,7,12,6,-4,-5,-3,0,-13,2,-12,-3,-9,0,-7,5,12,-6,12,-1,-3,6,-2,12,-6,-13,-4,-8,11,-13,12,-8,4,7,5,1,5,-3,10,-3,3,-7,6,12,-8,-7,-6,-2,-2,11,-1,-10,-13,12,-8,10,-7,3,-5,-3,-4,2,-3,7,-10,-12,-6,11,5,-12,6,-7,5,-6,7,-1,1,0,4,-5,9,11,11,-13,4,7,4,12,2,-1,4,4,-4,-12,-2,7,-8,-5,-7,-10,4,11,9,12,0,-8,1,-13,-13,-2,-8,2,-3,-2,-2,3,-6,9,-4,-9,8,12,10,7,0,9,1,3,7,-5,11,-10,-13,-6,-11,0,10,7,12,1,-6,-3,-6,12,10,-9,12,-4,-13,8,-8,-12,-13,0,-8,-4,3,3,7,8,5,7,10,-7,-1,7,1,-12,3,-10,5,6,2,-4,3,-10,-13,0,-13,5,-13,-7,-12,12,-13,3,-11,8,-7,12,-4,7,6,-10,12,8,-9,-1,-7,-6,-2,-5,0,12,-12,5,-7,5,3,-10,8,-13,-7,-7,-4,5,-3,-2,-1,-7,2,9,5,-11,-11,-13,-5,-13,-1,6,0,-1,5,-3,5,2,-4,-13,-4,12,-9,-6,-9,6,-12,-10,-8,-4,10,2,12,-3,7,12,12,12,-7,-13,-6,5,-4,9,-3,4,7,-1,12,2,-7,6,-5,1,-13,11,-12,5,-3,7,-2,-6,7,-8,12,-7,-13,-7,-11,-12,1,-3,12,12,2,-6,3,0,-4,3,-2,-13,-1,-13,1,9,7,1,8,-6,1,-1,3,12,9,1,12,6,-1,-9,-1,3,-13,-13,-10,5,7,7,10,12,12,-5,12,9,6,3,7,11,5,-13,6,10,2,-12,2,3,3,8,4,-6,2,6,12,-13,9,-12,10,3,-8,4,-7,9,-11,12,-4,-6,1,12,2,-8,6,-9,7,-4,2,3,3,-2,6,3,11,0,3,-3,8,-8,7,8,9,3,-11,-5,-6,-4,-10,11,-5,10,-5,-8,-3,12,-10,5,-9,0,8,-1,12,-6,4,-6,6,-11,-10,12,-8,7,4,-2,6,7,-2,0,-2,12,-5,-8,-5,2,7,-6,10,12,-9,-13,-8,-8,-5,-13,-5,-2,8,-8,9,-13,-9,-11,-9,0,1,-8,1,-2,7,-4,9,1,-2,1,-1,-4,11,-6,12,-11,-12,-9,-6,4,3,7,7,12,5,5,10,8,0,-4,2,8,-9,12,-5,-13,0,7,2,12,-1,2,1,7,5,11,7,-9,3,5,6,-8,-13,-4,-8,9,-5,9,-3,-3,-4,-7,-3,-12,6,5,8,0,-7,6,-6,12,-13,6,-5,-2,1,-10,3,10,4,1,8,-4,-2,-2,2,-13,2,-12,12,12,-2,-13,0,-6,4,1,9,3,-6,-10,-3,-5,-3,-13,-1,1,7,5,12,-11,4,-2,5,-7,-13,9,-9,-5,7,1,8,6,7,-8,7,6,-7,-4,-7,1,-8,11,-7,-8,-13,6,-12,-8,2,4,3,9,10,-5,12,3,-6,-5,-6,7,8,-3,9,-8,2,-12,2,8,-11,-2,-10,3,-12,-13,-7,-9,-11,0,-10,-5,5,-3,11,8,-2,-13,-1,12,-1,-8,0,9,-13,-11,-12,-5,-10,-2,-10,11,-3,9,-2,-13,2,-3,3,2,-9,-13,-4,0,-4,6,-3,-10,-4,12,-2,-7,-6,-11,-4,9,6,-3,6,11,-13,11,-5,5,11,11,12,6,7,-5,12,-2,-1,12,0,7,-4,-8,-3,-2,-7,1,-6,7,-13,-12,-8,-13,-7,-2,-6,-8,-8,5,-6,-9,-5,-1,-4,5,-13,7,-8,10,1,5,5,-13,1,0,10,-13,9,12,10,-1,5,-8,10,-9,-1,11,1,-13,-9,-3,-6,2,-1,-10,1,12,-13,1,-8,-10,8,-11,10,-6,2,-13,3,-6,7,-13,12,-9,-10,-10,-5,-7,-10,-8,-8,-13,4,-6,8,5,3,12,8,-13,-4,2,-3,-3,5,-13,10,-12,4,-13,5,-1,-9,9,-4,3,0,3,3,-9,-12,1,-6,1,3,2,4,-8,-10,-10,-10,9,8,-13,12,12,-8,-12,-6,-5,2,2,3,7,10,6,11,-8,6,8,8,-12,-7,10,-6,5,-3,-9,-3,9,-1,-13,-1,5,-3,-7,-3,4,-8,-2,-8,3,4,2,12,12,2,-5,3,11,6,-9,11,-13,3,-1,7,12,11,-1,12,4,-3,0,-3,6,4,-11,4,12,2,-4,2,1,-10,-6,-8,1,-13,7,-11,1,-13,12,-11,-13,6,0,11,-13,0,-1,1,4,-13,3,-9,-2,-9,8,-6,-3,-13,-6,-8,-2,5,-9,8,10,2,7,3,-9,-1,-6,-1,-1,9,5,11,-2,11,-3,12,-8,3,0,3,5,-1,4,0,10,3,-6,4,5,-13,0,-10,5,5,8,12,11,8,9,9,-6,7,-4,8,-12,-10,4,-10,9,7,3,12,4,9,-7,10,-2,7,0,12,-2,-1,-6,0,-11]),i=new o(3,3,r.F32_t|r.C1_t),u=new o(32,32,e|r.C1_t),s=a.prototype;return s.constructor=a,a.describe=function(r,a,o,f){var i=32,s=0,c=0,h=0,d=0,l=0,p=0,v=0,y=0,g=(r.data,r.cols,r.rows,u.data),w=528,_=0;f.type&e?f.resize(i,o,1):(f.type=e,f.cols=i,f.rows=o,f.channel=1,f.allocate());var m=f.data,x=0;for(s=0;o>s;++s){for(h=a[s].x,d=a[s].y,l=a[s].angle,t(r,u,l,h,d,32),_=0,c=0;i>c;++c)p=g[w+32*n[_+1]+n[_]],_+=2,v=g[w+32*n[_+1]+n[_]],_+=2,y=v>p|0,p=g[w+32*n[_+1]+n[_]],_+=2,v=g[w+32*n[_+1]+n[_]],_+=2,y|=(v>p)<<1,p=g[w+32*n[_+1]+n[_]],_+=2,v=g[w+32*n[_+1]+n[_]],_+=2,y|=(v>p)<<2,p=g[w+32*n[_+1]+n[_]],_+=2,v=g[w+32*n[_+1]+n[_]],_+=2,y|=(v>p)<<3,p=g[w+32*n[_+1]+n[_]],_+=2,v=g[w+32*n[_+1]+n[_]],_+=2,y|=(v>p)<<4,p=g[w+32*n[_+1]+n[_]],_+=2,v=g[w+32*n[_+1]+n[_]],_+=2,y|=(v>p)<<5,p=g[w+32*n[_+1]+n[_]],_+=2,v=g[w+32*n[_+1]+n[_]],_+=2,y|=(v>p)<<6,p=g[w+32*n[_+1]+n[_]],_+=2,v=g[w+32*n[_+1]+n[_]],_+=2,y|=(v>p)<<7,m[x+c]=y;x+=i}},a}()}(window);